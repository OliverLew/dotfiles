#!/bin/bash
if [[ $# == 3 ]]
then
    from=$1
    dest=$2
    match=$3
else
    echo usage: transmission-move from to pattern
    exit
fi

for i in $1/resume/*.resume
do
    if [[ `cat "$i" | grep -i "$match"` ]]
    then
        echo moving ${i//resume/}
        echo mv "$i" "$dest/resume/"
        trnname=$(basename "${i%.*}")
        echo mv "$from/torrents/$trnname.torrent" "$dest/torrents/"
        echo ""
    fi
done
