#!/bin/sh
# Update *-git aur packages

current_dir=$(pwd)

trap "cd \$current_dir; exit" TERM QUIT INT HUP

for p in $(pacman -Qmq | grep -- "-git"); do
    d=$HOME/.cache/yay/$p
    if [ -d "$d" ]; then
        cd "$d" && makepkg && makepkg -i
    else
        yay -S "aur/$p"
    fi
done
