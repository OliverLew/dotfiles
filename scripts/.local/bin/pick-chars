#!/bin/bash
[ -f "$1" ] || fontfile=$(fc-match "$1" --format="%{file}")
# find this python script `psnames` in my dotfiles repo github.com/OliverLew/dotfiles
psnames "${fontfile-$1}" |
grep "[0-9a-f]*\s.*" |
while read -r c n; do
    printf "<span size=\"x-large\"> \U$c   </span>%s $n\n" "$c"
done |
sed -e "s/\&/\&amp;/g" -e "s/<\([^s\/]\)/\&lt;\1/g" |
rofi -dmenu -i -p "Choose a glyph" -multi-select -markup-rows -columns 2 |
awk '{ print $3 }' |
xclip -selection clipboard
